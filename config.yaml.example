# 多版本 SRS 生成器配置文件示例
# 复制此文件为 config.yaml 并填入你的配置

# OpenAI API 配置
openai:
  # API 密钥（也可以通过环境变量 OPENAI_API_KEY 设置）
  api_key: ""  # 如果为空，将从环境变量读取
  # API 基础 URL（可选，用于代理或兼容服务）
  base_url: null  # 例如: "https://api.openai.com/v1"
  
  # Chat 模型配置
  chat:
    model: "gpt-4o-mini"  # 默认使用的 Chat 模型
    temperature: 0.2  # 温度参数
    max_tokens: null  # 可选，None 时使用 API 默认值
    max_continuations: 0  # 最大接续次数（当响应被截断时），0 表示不启用接续功能
  
  # Embedding 模型配置
  embedding:
    model: "text-embedding-3-small"  # 默认使用的 Embedding 模型
  
  # OpenAI API 调用重试设置
  retry:
    max_attempts: 3       # 单次 API 调用最大重试次数
    base_delay: 2.0       # 第一次重试等待时间（秒）
    max_delay: 30.0       # 单次等待时间上限（秒）
  
  # 各组件独立的模型和温度配置（如果未指定，则使用 chat 的默认值）
  components:
    split_to_semantic_units:
      model: null  # 如果为 null，则使用 chat.model
      temperature: null  # 如果为 null，则使用 chat.temperature
      max_tokens: null  # 如果为 null，则使用 chat.max_tokens
      max_continuations: null  # 如果为 null，则使用 chat.max_continuations
    requirement_explorer:
      model: null
      temperature: null
      max_tokens: null
      max_continuations: null
    requirement_clarifier:
      model: null
      temperature: null
      max_tokens: null
      max_continuations: null
    srs_generator:
      model: null
      temperature: null
      max_tokens: null
      max_continuations: null

# 迭代参数配置
iteration:
  # 每轮探索新需求的比例（相对于基线单元数量）
  rho: 0.5
  # 最大外循环次数（每轮生成一版 SRS）
  max_outer_iter: 5
  # 最大内循环次数（每轮内尝试探索新需求的次数）
  max_inner_iter: 3

# 相似度过滤配置
similarity:
  # 相似度阈值（0-1），超过此值视为"太像"，会被过滤
  threshold: 0.8

# 日志配置
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# 容错重试配置（可选）
robustness:
  split_to_semantic_units:
    max_attempts: 3      # 任意异常时的最大重试次数
    delay_seconds: 2.0   # 每次重试之间的等待时间
  requirement_explorer:
    max_attempts: 3
    delay_seconds: 2.0
  requirement_clarifier:
    max_attempts: 3
    delay_seconds: 2.0
  srs_generator:
    max_attempts: 3
    delay_seconds: 2.0
